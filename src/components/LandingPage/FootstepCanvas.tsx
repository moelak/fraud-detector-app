// components/Footsteps.tsx
import { useEffect, useState } from 'react';

const foot = [
  [50.867597, -21.798383, 54.160009, -23.917475, 57.778065, -25.310772, 61.579706, -24.823763, 65.016843, -22.691003, 65.227369, -19.777046, 63.096497, -16.82667, 59.665124, -15.356253, 56.12216, -14.9226, 52.064044, -16.23184, 50.294558, -18.93859],
  [60.120396, -12.457148, 63.923941, -14.99444, 68.750133, -15.737203, 73.109375, -14.87846, 76.360645, -12.559834, 77.686373, -9.181208, 75.462567, -5.673232, 71.798861, -3.738147, 66.861894, -3.490361, 62.292644, -5.124868, 58.989755, -8.760953],
  [65.574141, 1.179741, 69.377686, -1.357551, 74.203879, -2.100313, 78.563121, -1.24157, 81.81439, 1.077056, 83.140118, 4.455681, 80.916313, 7.963658, 77.252606, 9.898742, 72.31564, 10.146528, 67.746389, 8.512021, 64.443501, 4.875936],
  [65.899158, 15.917268, 69.976885, 12.635768, 76.252324, 11.73633, 81.47328, 12.477567, 86.095459, 15.579569, 86.99033, 21.425831, 83.826472, 24.972976, 79.183539, 27.064789, 73.698215, 27.234185, 68.463095, 24.972976, 64.886024, 20.553515],
  [58.488813, 36.095898, 65.70806, 29.820381, 74.192228, 28.331949, 82.750818, 31.085582, 88.109239, 34.285751, 91.458253, 41.65358, 87.067324, 47.458537, 79.773917, 50.286593, 71.736284, 50.063325, 64.145187, 47.458537, 60.126371, 42.695496],
];

const path = [
  [290, 500], [310, 560], [330, 620], [350, 680], [370, 740],
  [390, 800], [410, 860], [430, 920]
];

function Foot({ x, y, index }: { x: number; y: number; index: number }) {
  const scale = 0.25 * (index % 2 === 0 ? 1 : -1); // alternate left/right foot
  const transform = `translate(${x}, ${y}) scale(${scale}, 0.25)`;

  return (
    <g transform={transform} opacity={0.9}>
      {foot.map((points, i) => {
        const pairs = [];
        for (let j = 0; j < points.length; j += 2) {
          pairs.push(`${points[j]},${points[j + 1]}`);
        }
        return (
          <polygon
            key={i}
            points={pairs.join(' ')}
            fill="white"
          />
        );
      })}
    </g>
  );
}

export default function Footsteps() {
  return (
    <svg className="absolute top-0 left-0 w-full h-full pointer-events-none z-10">
      {path.map(([x, y], i) => (
        <Foot key={i} x={x} y={y} index={i} />
      ))}
    </svg>
  );
}
